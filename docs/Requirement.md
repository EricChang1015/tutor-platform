# Tutor Platform MVP 說明文件

我是線上教學老師與老闆，旗下有多名老師與學生，目前由我手動媒合上課時間、回收老師回報並結算。此專案目標是做出一個可先上線的 MVP，之後能逐步擴展功能與自動化流程。

## 1) 系統需求（MVP → 可擴展）

核心角色
- Admin：總覽、建立老師/學生、手動配課與加堂、月結審核、批准留言。
- Teacher：設定可授課時段、管理課表、上課連結、課後上傳證明與教師回報、查看月結。
- Student：持有約課次卡、取消約課次卡、課程包、選老師與時段預約、課後填學習目標。

購買項目
顯示在Student用戶的Dashboard
一個table顯示用戶購買的品項, 管理員可以延長或修改過期時間
- 約課次卡: 由管理員授予, 激活後一張卡一周的時間限制, 例如52張卡預設就是52周後到期
- 體驗次卡: 由管理員授予, 其效果等同約課次卡, 激活後一張卡一周的時間限制.
- 補償次卡: 由管理員授予, 其效果等同約課次卡, 激活後一張卡一周的時間限制.
- 取消約課次卡: 每10堂課會給予一張取消約課次卡, 到期時間與約課次卡一致.

顯示範例
| 套餐名稱 | 數量 | 類型 | 購買時間 | 啟動時間 | 過期時間 | 狀態 |
| -------------- | ------- | ---------------- | --------- | --------- | --------- | ---------- |
| 體驗卡 | 0/ 1張 | 新簽體驗課程 | 2021/2/16 | 2021/2/19 | 2023/4/29 | 已啟用 |
| 歐美外教次卡 | 0/ 65張 | 建議升級 | 2021/2/22 | 2021/2/22 | 2022/5/23 | 已啟用 |
| 菲律賓外籍教師次卡 | 0/ 65 張 | 建議升級 | 2021/2/22 | 2021/2/22 | 2022/5/23 | 已啟用 |
| 歐美外教次卡 | 1/ 2張 | feedback課程補償 | 2022/5/23 | 2025/9/17 | 2025/10/1 | 已啟動 |
| 專業中教次卡 | 0/ 2張 | feedback課程補償 | 2025/9/30 | | 14天 | 啟動(按鈕) |

Note: 
- 目前僅有菲律賓老師, 因此僅顯示"約課次卡", 但保持擴充可能.
- First-Expire-First-Use 如果有多張相同的卡片
- 體驗卡與約課次卡順序, 體驗卡優先.

預約與上課
- 每次預約扣一張約課次卡.
- 老師維護每週重複的可授課時段（支持例外）。
- 學生查看老師空檔並預約, 30分鐘一個課時 (上課時間25分鐘, 5分鐘休息)。
- 會議連結 MVP：由老師提供（可填 Zoom 個人會議室或每次填寫）。
- 通知：預約成功、課前 24h/1h 提醒、課後提醒（老師與學生各自需填資料）。
- 自動審批：預約成功即 confirmed（衝突或超容量才擋）。
- 管理員可以幫學生約課(由管理約約課仍然會扣課卡)

課後閉環
- 老師：24H內上傳截圖證明 + 填對課堂評價(提示老師可以作業/詞彙/語法/發音/連貫性/表現)才能進結算, 否則顯示待結算。
- 課後學生可以針對老師評價, 一堂課僅能留一次, default僅留言學生用戶可見, admin或老師批准後該留言添加在該老師的頁面.

取消/補課
- 學生取消: 取消政策24小時前取消無消耗, 上课前12~24小時取消课程，消耗1張取消約課卡；上课前2~12小時取消课程，消耗2張取消約課卡；2小時內無法取消預設扣堂。
- 老師取消：退還學生約課次卡, 先記錄，顯示在report中。
- 技術問提：系統紀錄, 由管理員決定補償方案, 例如補償: 約課次卡2張.
- 管理員取消: 不須使用取消約課次卡

結算與報表
- 老師分潤預設5美金一個課時, admin可覆寫修改個別老師設定.
- Admin 報表：預約數、完成率、取消率、技術取消比例 (可見所有老師)。
- Teacher 報表：預約數、完成率、取消率、技術取消比例、估算收入 (僅可見自己)。
- Student：剩餘堂數、已預約與歷史課程。

權限與隱私
- RBAC：Admin/Teacher/Student 路由與資料可見性隔離。
- 檔案：課堂截圖上傳至 S3/MinIO，私有存取，僅 Admin 或對應老師可見, 老師profile的圖片與影片也可以上傳到此處。