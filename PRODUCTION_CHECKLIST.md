# ğŸš€ ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æª¢æŸ¥æ¸…å–®

## ğŸ“‹ éƒ¨ç½²å‰æª¢æŸ¥

### ğŸ” å®‰å…¨æ€§æª¢æŸ¥

#### ç’°å¢ƒè®Šæ•¸å’Œå¯†é‘°
- [ ] æ›´æ”¹æ‰€æœ‰é è¨­å¯†ç¢¼
  - [ ] æ•¸æ“šåº«å¯†ç¢¼ (`POSTGRES_PASSWORD`)
  - [ ] Redis å¯†ç¢¼ï¼ˆå¦‚éœ€è¦ï¼‰
  - [ ] MinIO ç®¡ç†å“¡å¯†ç¢¼ (`MINIO_ROOT_PASSWORD`)
  - [ ] JWT å¯†é‘° (`JWT_SECRET`) - ä½¿ç”¨å¼·éš¨æ©Ÿå­—ç¬¦ä¸²
  - [ ] ç®¡ç†å“¡ç¨®å­å¯†ç¢¼ (`ADMIN_SEED_PASSWORD`)

#### API å®‰å…¨
- [ ] å•Ÿç”¨ HTTPS/TLS
- [ ] é…ç½® CORS ç™½åå–®
- [ ] å¯¦æ–½ Rate Limiting
- [ ] æ·»åŠ  API ç‰ˆæœ¬æ§åˆ¶
- [ ] è¨­ç½®è«‹æ±‚å¤§å°é™åˆ¶
- [ ] é…ç½®å®‰å…¨ Headers

#### æ•¸æ“šåº«å®‰å…¨
- [ ] é™åˆ¶æ•¸æ“šåº«ç¶²çµ¡è¨ªå•
- [ ] å•Ÿç”¨æ•¸æ“šåº« SSL/TLS
- [ ] å®šæœŸå‚™ä»½ç­–ç•¥
- [ ] è¨­ç½®æ•¸æ“šåº«ç”¨æˆ¶æ¬Šé™æœ€å°åŒ–

#### æª”æ¡ˆå­˜å„²å®‰å…¨
- [ ] MinIO è¨ªå•æ§åˆ¶
- [ ] æª”æ¡ˆé¡å‹ç™½åå–®
- [ ] æª”æ¡ˆå¤§å°é™åˆ¶
- [ ] ç—…æ¯’æƒæï¼ˆå¯é¸ï¼‰

### âš¡ æ€§èƒ½å„ªåŒ–

#### å¾Œç«¯å„ªåŒ–
- [ ] å•Ÿç”¨ API éŸ¿æ‡‰å£“ç¸®
- [ ] é…ç½®æ•¸æ“šåº«é€£æ¥æ± 
- [ ] å¯¦æ–½ Redis å¿«å–ç­–ç•¥
- [ ] å„ªåŒ–æ•¸æ“šåº«æŸ¥è©¢å’Œç´¢å¼•
- [ ] é…ç½® API å¿«å– Headers

#### å‰ç«¯å„ªåŒ–
- [ ] å•Ÿç”¨ç”Ÿç”¢æ¨¡å¼æ§‹å»º
- [ ] é…ç½® CDNï¼ˆå¯é¸ï¼‰
- [ ] å¯¦æ–½éœæ…‹è³‡æºå¿«å–
- [ ] å„ªåŒ–åœ–ç‰‡å’Œè³‡æºå¤§å°
- [ ] å•Ÿç”¨ Gzip å£“ç¸®

#### æ•¸æ“šåº«å„ªåŒ–
- [ ] é…ç½®é©ç•¶çš„æ•¸æ“šåº«åƒæ•¸
- [ ] è¨­ç½®é€£æ¥æ± å¤§å°
- [ ] é…ç½®æŸ¥è©¢è¶…æ™‚
- [ ] å¯¦æ–½æ•¸æ“šåº«ç›£æ§

### ğŸ“Š ç›£æ§å’Œæ—¥èªŒ

#### æ‡‰ç”¨ç›£æ§
- [ ] é…ç½®å¥åº·æª¢æŸ¥ç«¯é»
- [ ] è¨­ç½®æ‡‰ç”¨æ€§èƒ½ç›£æ§ (APM)
- [ ] é…ç½®éŒ¯èª¤è¿½è¹¤
- [ ] å¯¦æ–½æ¥­å‹™æŒ‡æ¨™ç›£æ§

#### ç³»çµ±ç›£æ§
- [ ] CPUã€è¨˜æ†¶é«”ã€ç£ç›¤ç›£æ§
- [ ] ç¶²çµ¡æµé‡ç›£æ§
- [ ] å®¹å™¨è³‡æºç›£æ§
- [ ] æ•¸æ“šåº«æ€§èƒ½ç›£æ§

#### æ—¥èªŒç®¡ç†
- [ ] é›†ä¸­åŒ–æ—¥èªŒæ”¶é›†
- [ ] æ—¥èªŒè¼ªè½‰å’Œä¿ç•™ç­–ç•¥
- [ ] æ•æ„Ÿä¿¡æ¯éæ¿¾
- [ ] æ—¥èªŒåˆ†æå’Œå‘Šè­¦

### ğŸ”„ å‚™ä»½å’Œç½é›£æ¢å¾©

#### æ•¸æ“šå‚™ä»½
- [ ] è‡ªå‹•åŒ–æ•¸æ“šåº«å‚™ä»½
- [ ] æª”æ¡ˆå­˜å„²å‚™ä»½
- [ ] å‚™ä»½é©—è­‰å’Œæ¸¬è©¦
- [ ] ç•°åœ°å‚™ä»½å­˜å„²

#### ç½é›£æ¢å¾©
- [ ] æ¢å¾©ç¨‹åºæ–‡æª”
- [ ] æ¢å¾©æ™‚é–“ç›®æ¨™ (RTO)
- [ ] æ¢å¾©é»ç›®æ¨™ (RPO)
- [ ] å®šæœŸç½é›£æ¢å¾©æ¼”ç·´

## ğŸ›  ç”Ÿç”¢ç’°å¢ƒé…ç½®å»ºè­°

### Docker Compose ç”Ÿç”¢é…ç½®

```yaml
# docker-compose.prod.yml
version: "3.9"

services:
  postgres:
    image: postgres:15-alpine
    restart: always
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - internal
    # ä¸æš´éœ²ç«¯å£åˆ°å¤–éƒ¨

  redis:
    image: redis:7-alpine
    restart: always
    command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]
    volumes:
      - redis_data:/data
    networks:
      - internal

  api:
    build: ./api
    restart: always
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}
      REDIS_URL: redis://:${REDIS_PASSWORD}@redis:6379
      JWT_SECRET: ${JWT_SECRET}
    depends_on:
      - postgres
      - redis
    networks:
      - internal
      - web

  nginx:
    image: nginx:alpine
    restart: always
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - api
    networks:
      - web

networks:
  internal:
    driver: bridge
  web:
    driver: bridge

volumes:
  postgres_data:
  redis_data:
```

### ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹

```bash
# .env.production
NODE_ENV=production

# æ•¸æ“šåº«é…ç½®
DB_USER=produser
DB_PASSWORD=your_secure_db_password_here
DB_NAME=tutorplatform_prod

# Redis é…ç½®
REDIS_PASSWORD=your_secure_redis_password_here

# JWT é…ç½®
JWT_SECRET=your_very_long_and_secure_jwt_secret_here

# MinIO é…ç½®
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=your_secure_minio_password_here

# éƒµä»¶é…ç½®
SMTP_HOST=your_smtp_host
SMTP_PORT=587
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password

# ç®¡ç†å“¡å¸³è™Ÿ
ADMIN_SEED_EMAIL=admin@yourdomain.com
ADMIN_SEED_PASSWORD=your_secure_admin_password_here
```

### Nginx é…ç½®ç¯„ä¾‹

```nginx
# nginx.conf
events {
    worker_connections 1024;
}

http {
    upstream api {
        server api:3001;
    }

    server {
        listen 80;
        server_name yourdomain.com;
        return 301 https://$server_name$request_uri;
    }

    server {
        listen 443 ssl http2;
        server_name yourdomain.com;

        ssl_certificate /etc/nginx/ssl/cert.pem;
        ssl_certificate_key /etc/nginx/ssl/key.pem;

        # å®‰å…¨ Headers
        add_header X-Frame-Options DENY;
        add_header X-Content-Type-Options nosniff;
        add_header X-XSS-Protection "1; mode=block";

        # API ä»£ç†
        location /api/ {
            proxy_pass http://api/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # å‰ç«¯éœæ…‹æ–‡ä»¶
        location / {
            root /var/www/html;
            try_files $uri $uri/ /index.html;
        }
    }
}
```

## ğŸš¦ éƒ¨ç½²æ­¥é©Ÿ

1. **æº–å‚™ç”Ÿç”¢æœå‹™å™¨**
   - å®‰è£ Docker å’Œ Docker Compose
   - é…ç½®é˜²ç«ç‰†è¦å‰‡
   - è¨­ç½® SSL è­‰æ›¸

2. **é…ç½®ç’°å¢ƒ**
   - è¤‡è£½ç”Ÿç”¢ç’°å¢ƒé…ç½®æ–‡ä»¶
   - è¨­ç½®ç’°å¢ƒè®Šæ•¸
   - é…ç½®åŸŸåå’Œ DNS

3. **éƒ¨ç½²æ‡‰ç”¨**
   ```bash
   # æ§‹å»ºå’Œå•Ÿå‹•æœå‹™
   docker-compose -f docker-compose.prod.yml up -d --build
   
   # æª¢æŸ¥æœå‹™ç‹€æ…‹
   docker-compose -f docker-compose.prod.yml ps
   
   # æŸ¥çœ‹æ—¥èªŒ
   docker-compose -f docker-compose.prod.yml logs
   ```

4. **é©—è­‰éƒ¨ç½²**
   - é‹è¡Œå¥åº·æª¢æŸ¥
   - åŸ·è¡Œç«¯åˆ°ç«¯æ¸¬è©¦
   - é©—è­‰æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

5. **è¨­ç½®ç›£æ§**
   - é…ç½®ç›£æ§å·¥å…·
   - è¨­ç½®å‘Šè­¦è¦å‰‡
   - æ¸¬è©¦å‚™ä»½å’Œæ¢å¾©

## ğŸ“ˆ æ€§èƒ½åŸºæº–

### é æœŸæ€§èƒ½æŒ‡æ¨™
- API éŸ¿æ‡‰æ™‚é–“ï¼š< 200ms (95th percentile)
- æ•¸æ“šåº«æŸ¥è©¢æ™‚é–“ï¼š< 100ms (å¹³å‡)
- é é¢è¼‰å…¥æ™‚é–“ï¼š< 3 ç§’
- ç³»çµ±å¯ç”¨æ€§ï¼š> 99.9%

### å®¹é‡è¦åŠƒ
- ä½µç™¼ç”¨æˆ¶ï¼š100-500 ç”¨æˆ¶
- æ•¸æ“šåº«é€£æ¥ï¼š20-50 é€£æ¥
- è¨˜æ†¶é«”ä½¿ç”¨ï¼š< 2GB
- CPU ä½¿ç”¨ï¼š< 70%

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **æ•¸æ“šåº«é€£æ¥å¤±æ•—**
   - æª¢æŸ¥æ•¸æ“šåº«æœå‹™ç‹€æ…‹
   - é©—è­‰é€£æ¥å­—ç¬¦ä¸²
   - æª¢æŸ¥ç¶²çµ¡é€£æ¥

2. **API éŸ¿æ‡‰ç·©æ…¢**
   - æª¢æŸ¥æ•¸æ“šåº«æŸ¥è©¢æ€§èƒ½
   - ç›£æ§ç³»çµ±è³‡æºä½¿ç”¨
   - æª¢æŸ¥ç¶²çµ¡å»¶é²

3. **æª”æ¡ˆä¸Šå‚³å¤±æ•—**
   - æª¢æŸ¥ MinIO æœå‹™ç‹€æ…‹
   - é©—è­‰å­˜å„²ç©ºé–“
   - æª¢æŸ¥æ¬Šé™è¨­ç½®

### ç·Šæ€¥è¯çµ¡
- ç³»çµ±ç®¡ç†å“¡ï¼š[è¯çµ¡ä¿¡æ¯]
- é–‹ç™¼åœ˜éšŠï¼š[è¯çµ¡ä¿¡æ¯]
- åŸºç¤è¨­æ–½åœ˜éšŠï¼š[è¯çµ¡ä¿¡æ¯]
